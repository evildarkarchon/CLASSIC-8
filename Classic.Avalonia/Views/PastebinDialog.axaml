<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Classic.Avalonia.ViewModels"
             x:Class="Classic.Avalonia.Views.PastebinDialog"
             x:DataType="vm:PastebinDialogViewModel"
             Width="600" Height="300"
             Background="#2D2D30">

    <Design.DataContext>
        <vm:PastebinDialogViewModel />
    </Design.DataContext>

    <Border BorderBrush="#3F3F46" BorderThickness="1" CornerRadius="6">
        <Grid RowDefinitions="Auto,*,Auto">
            
            <!-- Header -->
            <Border Grid.Row="0" Background="#007ACC" Padding="16,12">
                <TextBlock Text="Fetch Log from Pastebin" 
                          FontSize="16" FontWeight="Bold" 
                          Foreground="White" 
                          HorizontalAlignment="Center"/>
            </Border>

            <!-- Main Content -->
            <StackPanel Grid.Row="1" Spacing="20" Margin="24">
                
                <!-- Instructions -->
                <TextBlock Text="Enter a Pastebin URL or ID to fetch a crash log. The log will be downloaded and saved to your Crash Logs folder."
                          TextWrapping="Wrap" 
                          Foreground="#CCCCCC" 
                          FontSize="13"
                          Margin="0,0,0,10"/>

                <!-- Input Section -->
                <Border Background="#252526" CornerRadius="4" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Pastebin URL or ID:" 
                                  FontWeight="SemiBold" 
                                  Foreground="#CCCCCC"/>
                        
                        <TextBox Text="{Binding UrlOrId}" 
                                Watermark="e.g., https://pastebin.com/abcd1234 or abcd1234"
                                FontSize="13"
                                Padding="8"
                                Background="#1E1E1E"
                                Foreground="#CCCCCC"
                                BorderBrush="#3F3F46"
                                BorderThickness="1"
                                CornerRadius="3"/>
                    </StackPanel>
                </Border>

                <!-- Status Section -->
                <Border Background="#252526" CornerRadius="4" Padding="16">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Status:" 
                                  FontWeight="SemiBold" 
                                  Foreground="#CCCCCC"/>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <!-- Loading indicator -->
                            <TextBlock IsVisible="{Binding IsFetching}"
                                      Text="âŸ³"
                                      FontSize="16"
                                      Foreground="#007ACC"
                                      VerticalAlignment="Center"/>
                            
                            <TextBlock Text="{Binding StatusMessage}" 
                                      TextWrapping="Wrap" 
                                      Foreground="#CCCCCC" 
                                      FontSize="13"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

            </StackPanel>

            <!-- Buttons -->
            <Border Grid.Row="2" Background="#1E1E1E" Padding="16">
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Right" 
                           Spacing="12">
                    
                    <Button Content="Clear" 
                            Command="{Binding ClearCommand}"
                            Padding="16,8"
                            Background="#383838" 
                            Foreground="#CCCCCC"
                            BorderThickness="1"
                            BorderBrush="#3F3F46"
                            CornerRadius="4">
                        <Button.Styles>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="#464647"/>
                            </Style>
                            <Style Selector="Button:pressed">
                                <Setter Property="Background" Value="#2D2D30"/>
                            </Style>
                        </Button.Styles>
                    </Button>
                    
                    <Button Content="Cancel" 
                            Command="{Binding CancelCommand}"
                            Padding="16,8"
                            Background="#383838" 
                            Foreground="#CCCCCC"
                            BorderThickness="1"
                            BorderBrush="#3F3F46"
                            CornerRadius="4">
                        <Button.Styles>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="#464647"/>
                            </Style>
                            <Style Selector="Button:pressed">
                                <Setter Property="Background" Value="#2D2D30"/>
                            </Style>
                        </Button.Styles>
                    </Button>
                    
                    <Button Content="Fetch Log" 
                            Command="{Binding FetchLogCommand}"
                            IsEnabled="{Binding IsInputValid}"
                            Padding="16,8"
                            Background="#007ACC" 
                            Foreground="White"
                            BorderThickness="0"
                            CornerRadius="4">
                        <Button.Styles>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="#005A9E"/>
                            </Style>
                            <Style Selector="Button:pressed">
                                <Setter Property="Background" Value="#004578"/>
                            </Style>
                            <Style Selector="Button:disabled">
                                <Setter Property="Background" Value="#3F3F46"/>
                                <Setter Property="Foreground" Value="#6D6D6D"/>
                            </Style>
                        </Button.Styles>
                    </Button>
                    
                </StackPanel>
            </Border>

        </Grid>
    </Border>

</UserControl>
